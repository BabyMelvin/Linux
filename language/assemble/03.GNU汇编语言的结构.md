# 区与重定位
区(Section)表示一个地址范围，系统相同方式对待和处理该地址范围。区概念主要用来表示编译器生成的目标文件(或可执行文件)中不同的信息区域，目标文件中的正文信息或数据区。

链接器ld会把输入的目标文件中的内容按照一定规律组合生成一个可执行程序。当as汇编器输出一个目标文件时，该目标文件中代码被默认设置成从地址0开始。此后ld会将会在链接过程中不同目标文件的各个部分分配不同的最终地址位置。ld会把程序中的字节块移动到程序运行时的地址处。这些作为固定单元进行移动的，长度以及字节次序都不会改变。这样固定单元被称作区。

区分配运行时刻的地址操作就被称为重定位(Relocation)操作,其中包括调整目标文件中的记录地址，从而让它们对应到恰当的运行时刻地址上。


as汇编器输出产生的目标文件至少有3个区，正文`text`,数据`data`和bss区。每个区都可能是空的。在一个目标文件中，其text区从地址0开始，随后是data区，后面是bss区。

当重定位时，链接器ld需要知道哪些数据发生变化，以及如何修改数据，as汇编器也会往目标文件写入所需要的重定位信息。重定位操作，每次涉及目标文件中的一个地址时，ld必须知道：

* 目标文件中一个地址的引用是从什么地方算起
* 该引用的自己长度是多少
* 该地址引用是哪个区？(地址)-(区的开始地址)的值等于多少？
* 对地址引用于程序计数器PC相关吗？

as使用所有地址可表示为：`区 + 区中偏移`。用记号`{secname N}`来表示区secname的偏移N。

除了text


# example

主要包括三个常用的段：

* data 数据段 声明带有初始值的元素
* bss 数据段 声明使用0或者null初始化的元素
* text 正文段 包含的指令，每个汇编程序必须包含此段

使用`.section`指令定义段，如：

```asm
.section .data
.section .bss
.section .text
```

起始点:

gnu 汇编器使用`_start`标签表示默认的起始点,此外如果想要汇编**内部的标签能够被外部程序访问**,需要使用`.globl`指令,如:`.globl _start`

使用通用库函数时可以使用:

```asm
ld -dynamic-linker /lib/ld-linux.so.2
```
