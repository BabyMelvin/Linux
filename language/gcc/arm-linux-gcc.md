# 1.arm-linux-gcc 选项
可执行程序需要：预处理、编译、汇编和连接。

* 1.预处理：`#`开头成为预处理命令。预处理将**要包含(include)的文件插入源文件中**、**将宏展开**、**根据条件编译命令选择要使用的代码**，最后将这些东西输出到一个`.i`文件中等待进一步处理。用到`arm-linux-cpp`工具。
* 2.编译：将`C/C++`代码(上面`.i`文件)翻译成汇编代码，用到工具`ccl`
* 3.汇编：将第2步输出汇编代码翻译成符合一定格式的机器代码，Linux系统表现为ELF目标文件(OBJ文件)，用到`arm-linux-as`。反汇编：指将机器代码转换为汇编代码，调试用到。
* 4.连接：将生成的OBJ文件和系统库OBJ文件、库文件连接起来，最终生成了可以在特定平台运行的可执行文件，用到`arm-linux-ld`.

* 编译器：`.i`:预处理后文件。`.s`或`.S`汇编语言程序
* 连接器：`.o`:目标文件(Object file,OBJ文件)。`.a`:归档库文件（Archive file）

## 1.1 总体选项

* `-c`:预处理、编译和汇编源文件，但不作为连接，编译根据源文件生成OBJ文件。GCC通过`.o`替换原`.c`,`.i`,`.s`等。
* `-S`:编译后停止，不进行汇编。:`gcc -S -o main.s main.c`
* `-E`:预处理后停止，不进行编译。`gcc -E main.c`
* `-o file`:执行输出文件file。
* `-v`:显示制作GCC工具自身时命令；同时显示编译器驱动程序、预处理器、编译器的版本号。

## 1.2警告选项

* `-Wall`:打开所有需要注意的警告信息，比如没有指定类型声明、声明就使用函数、局部变量声明但未使用
*

## 1.3调试选项(Debugging Option)

* `-g`

## 1.4优化选项(Optimization Option)

> gcc -O2 -c -o main.o main.c

* `-O`或`-O1`:优化编译过程占用稍微多的时间和相当多的内存。使用这个选项`-fthread-jump`和`-fdefer-pop`选项被打开。
* `-O2`:多优化一些。既增加编译时间，也提高了生成代码的效果。
* `-O3`:优化更多。打开了`-finline-fucntions`选项。
* `-O0`:不优化

## 1.5连接器选项(Linker Option)
> 连接OBJ文件，输出可执行文件或库文件

* 1.`object-file-name`:某些文件没有明确猴嘴，GCC认为他们是OBJ文件或库文件。连接操作，OBJ文件成为连机器的输入文件。`main.o`,`sub.o`等输入文件
* 2.`-llibrary`:连接名为library的库文件。连接器在标准搜索目录中寻找这个库文件，库文件的真正名字是`liblibrary.a`。出列一些标准目录外，还包括用户以`-L`选项执行的路径。一般用这个方法来找到文件的库文件(由Obj组成的归档文件Archive file).
	* 连接处理归档文件的方法：扫描归档文件，寻找某些成员，这些成员的符号目前已经被引用，不过还没有被定义。**但是**，连接器找到是普通OBJ文件，不是库文件按普通方式连接进来。
    * 注意：加`-l`和普通文件区别，`-l`会扩展为实际名称和搜索一些目录。
* 3.`-nostdlib`:不连接系统标准启动文件和标准库文件，只把指定的文件传递给连接器。这个选项常用于编译内核、bootloader程序，不需要启动文件、标准库文件。
* 4.`-static`:支持动态链接的系统上，阻止链接共享库。
* 5.`-shared`:生成一个共享OBJ文件，它可以和其他OBJ文件连接可执行文件。

## 1.6目录选项(Directory Option)
执行搜索路径，用于查找头文件，库文件，或编译器的某些成员。

* `-Idir`:在头文件的搜索路径列表中添加dir目录。
	* 如果以`#include<>`包含文件，则只在标准库目录开始搜索(包含使用`-Idir`选项定义的目录);
	* 如果以`#include""`包含文件，则先从用户的工作目录开始搜索，再搜索标准库目录。
* `-I-`:`-I-`不影响使用系统标准目录。
	* 在`-I-`前面使用`-I`选项指定搜索路径只适用于`#include "file"`情况，不能用来搜索`#include<file>`包含头文件。
	* 用`-I`位于`-I-`后面能正常
* `-Ldir`:在`-l`选项搜索路径列表中添加dir目录

```makefile
gcc -c -o sub.o sub.c
gcc -shared -o -fPIC libsub.a sub.o
gcc -L. -o test main.o -lsub
```