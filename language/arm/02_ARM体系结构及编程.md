# 1.ARM体系结构
体系结构：硬件和软件资源以及相互间的连接关系。

体系结构最重要是：**指令系统**和**寄存器组**。
* 指令系统分为：CISC和RISC，嵌入式CPU使用RISC结构。

体系结构还有存储器结构：冯.诺依曼结构和哈佛结构

* 冯.诺依曼结构：传统计算机，将指令存储器和数据存储器合并在一起。
	* 特点：程序和数据共用一个存储空间。处理器执行指令必须从存储器取出指令解码，再取数据运算，高速运算容易产生瓶颈。
* 哈佛结构：将程序存储和数据存储分开，一种并行系统结构。
	* 特点：有两个独立存储器(指令和数据)，可独立编址和独立访问。有4条总线(数据的地址总线和数据总线，程序的地址总线和数据总线)

# 2.ARM流程线结构
处理器执行每一条指令的典型步骤：

* 1.从存储器读取指令(fetch)
* 2.译码以鉴别它是哪一类指令(dec)
* 3.从寄存器组取得所有需要的操作数(reg)
* 4.将操作数据进行组合以得到结果或存储器地址(exe);
* 5.如果需要，则访问存储器存取数据(mem)
* 6.将结构会写到寄存器组(res)

上面步骤操作都是独立的。

ARM7采用三级流水线：取指、译码和执行。采用冯结构，指令和数据不能再用一个周期进行操作。

ARM9采用的是5级流水线结构，内部使用哈佛结构（拥有独立的指令和数据总线）。指令和数据的读取可以在同一周期进行。

# 3.ARM总线结构
ARM使用的是AMBA总线结构，用来连接高性能系统模块，支持突发方式数据传输。AMBA是ARM公司公布的总线标准，有3种总线：

* AHB(Adanced High performance Bus)：连接高性能系统模块，支持突发式数据传输方式及单个数据传输方式，所有参考同一个时钟沿。
* ASB（Advanced System Bus):用于高性能系统模块，支持突发数据传输模式。
* APB（Advaned Peripheral Bus)：一个简单接口支持低性能的外围接口。

# 4.ARM微处理器的工作状态和模式
## 4.1工作状态
有两种状态：

* 1.ARM状态：处理器执行32位对齐的ARM指令。
* 2.Thumb状态：处理器执行16位、半字节对齐的Thumb指令

## 4.2 工作状态的切换
系统上电或复位处于ARM状态，可以与Thumb状态进行切换

* 进入Thumb状态
	1. 当操作数寄存器的状态位(0)为1时，可以采用执行BX指令的方法，使微处理器从ARM状态切换到Thumb状态
	2. 当处理器处于Thumb状态发生异常(IRQ,FIQ,Undef,Abort和SWI等)，则当异常处理返回时，自动切换到Thumb状态

```
;从ARM状态切换到Thumb状态
LDR R0,=Lable + 1
BX  R0
```

* 切换到ARM状态
	1. 当操作数寄存器的状态位为0时，执行BX指令可以使微处理器从Thumb状态切换到ARM状态。
	2. 处理器处理异常，把PC指针放入异常模式连接寄存器中，并从异常向量地址开始执行程序，也可以使处理器切换到ARM 状态

```
;从Thumb状态切换到ARM状态
LDR R0, =Lable
BX R0
```

## 4.3ARM微处理器的工作模式
### 4.3.1 ARM处理器模式类型
有7中模式：

* 1.用户模式(user):ARM正常程序状态，大部分执行在这种模式。
* 2.快速中断模式(fiq):当一个高优先级(fast)中断产生进入这种模式，用于高速数据传输或通道处理。
* 3.外部中断模式(irq):一个低优先级(normal)中断产生进入这种模式，用于通用中断处理
* 4.管理模式(svc):当复位或软中断指令执行时将进入这种模式，供系统使用一种保护模式
* 5.中止模式(abt):当存取异常时候进行这种模式，用于虚拟存储及存储保护
* 6.


