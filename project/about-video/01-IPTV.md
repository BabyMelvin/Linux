数字视频和告诉宽带网络的应用，在宽带网络上传输实时音频和视频技术叫做: `IPTV(Internet Protocal TV)`、流媒体、`Video Over Ip`和`IP视频`.该技术并不是通过下载和存储大量的视频和音频文件然后播放，而是数据在网络上以流的形式发送。流将视频和音频数据分割成适合在网络上传播`小的数据包`。

实时的视频和音频数据从视频服务器或实时视频编码器中流出，穿过网络，并在接收器（或客服端）上实时播放。因此，用户不必等待所有的数据都下载完成就可以观看视频。

### 1.技术考虑

网络上传输流视频并不是一件简单事情。

第一，即使压缩视频数据，也需要相对较高的带宽。如：在一个`1.5Mbit/s`的DSL链接上支持连个标清视频流，视频流的比特率应该限制在`700kbit/s`以内。因此，**需要采用新的H.264和SMPET VC-1视频压标准**。H.264和VC-1所获得的比特率可以使服务器范围进一步扩大，因为DSL的比特率率随着距离的增加而下降。

第二，避免播放过程产生中断，流视频数据需要实时传输。要求视频服务器和实时编码能够连续地传输视频流并且可以避免网络拥塞。为了解决这个问题，已经有标准可以实现在网络上预留带宽资源。同时，还采用**多播**进一步减少对**网络带宽**的需求。

第三,流视频通常是突发式的。流视频客服端的接收缓冲的大小是有限的。如果不采取一定的措施平滑传输的比特率，接收缓冲器就可能发生上溢或下溢。为了解决这个问题，需要采用另外的协议来**管理时间问题**。

### 2.多播

在网络上传送实时音频和视频的常用技术有以下三种:

* 单播：服务器只将数据发送到一个接收器。端口号由接收器来选择。

<image src="image/19-1.png"/>

* 广播：数据从一个服务器向所有的接收器发送。

<image src="image/19-2.png"/>

* 多播：数据从一个服务器向一组接收器发送。服务器选择多点传送的IP地址和端口。这种方式是实况和准视频点播(NVoD)应用的一个特例。

<image src="image/19-3.png"/>

随着用户数量增加以及实时传递大量数据需求，多点传送逐渐得到支持。这个背景下，多点传送是节省网络宽带和服务能力的一种有限途径。

### 3.基于RTSP的解决方案

专用解决方案会使得每个服务器提供商都有自己独特的流协议和文件格式，并且要求客服端能够支持多个协议或针对某一个特定的提供商。标准的解决方案，（IETF ,Internet Engineering Task Force因特网工程任务组）开发了几种协议以支持跨平台的互连和客户与服务之间的通讯。

* RTSP是一种控制协议。可以初始化和引导来自视频服务商的流数据的传输，实现远程控制能力。RTSP并不是传输多媒体数据，尽管RTSP链接可以实现传输RTP数据方式方便防洪墙和其他网络设备。
* RTP是传输包括流音频和视频的实时数据的传输协议。RTP和RTSP通常一起使用，但也可以单独使用。
* RTCP是RTP一部分。可以用于辅助唇音同步和服务质量(Quality-of-Service)管理。
* RSVP协议用于建立和管理所需的QoS级，确保有足够的网络资源（如带宽）可用。

#### 3.1 RTSP
实时流协议（RTSP）在服务器(源)和客服端（接收器）之间建立和控制一个或多个时间同步的音频和视频流数据。服务器提供流的播放或录制服务，而客服端要求服务器提供连续的数据。

RTSP为音频和视频提供“VCR风格”的控制功能，包括播放、暂停、快进、后退。它同时还提供以下功能。

* 1.从服务器获得节目信息。用户可以通过浏览器（HTTP）或其他技术请求可用节目的列表及其描述(节目描述)。如果一个节目是多点传送，节目描述里也包含所有的多点传送地址和端口。如果一个节目只发送一个客服端(单点传送)，那么由用户提供目的地址。

* 2.将服务接入会议。一个服务器可以被要求加入一个已有的会议，该服务器可以提供或或记录数据。
* 3.向已有的数据中添加媒体。这对直播来说非常有用，当有附加的数据时，服务器可以即时通知客户。

##### 3.1.1 RTSP和HTTP比较

RTSP和HTTP提供相同的服务相同，只是RTSP是以音频和视频流的形式，而HTTP是以文本和图片的形式。他们语法和操作也很相似，使得大多数HTTP扩展可以很容易被RTSP采用。 
例如，

* RTSP的URL为`rtsp://media.example.com:554/twister`，表示节目twister中的音视频流，它可以由音频和视频流组成。
* RTSP的URL为`rtsp://media.example.com:554/twister/audio`，表示节目twister的音频流，它可以通过向服务器`media.example.com`端口554发出RTSP请求控制。

由于用户界面通常采用web页形式实现，RTSP和HTTP的功能有一些重叠。因此，RTSP在WEB和视频服务器之间支持不同的切换点。例如，节目描述可以通过HTTP或RTSP获得，从而是的RTSP服务器和客服端可以不支持HTTP。下图采用了web服务器为表现形式的实例，其中包括一个独立的视频服务器。

<image src="image/19-4.png"/>

RTSP和HTTP的不同之处表现在两个主要领域:

* 第一，不同与HTTP，RTSP兼容的视频服务器必须维持会话状态，以将RTSP请求和流关联起来。
* 第二，从本质上说HTTP是一个不对称协议(客服端发出请求，服务器响应)，但在RTSP协议中服务器和客服端都可以发出请求。例如，视频服务器可以发出请求以设置流的播放参数。

#### 3.1.2 流特性

流的特性在`表现描述文件`中定义，其中包括编码格式、语言、RTSP URL、目的地址、端口额其他参数。客服端可以通过HTTP或其他方式获得`表现描述文件`。RTSP请求通常在独立于数据信道的信道上发送。

### 3.2 RTP

实时传输协议(RTP)是一种基于包的传输协议，用来传输实时数据，如音频和视频流。RTP的设计初衷针对多点传送，但也可以用于单点传送和视频点播。

在网络上发送数据包的延迟和误差是不可预测的，这使得实时传输视频变得更加复杂。为了解决这问题，RTP包头包含`时间戳`、`丢包保护`、`载荷标识`、`源标识`和`安全等信息`。这些信息用于在`应用层`实现**数据丢包恢复**、**拥塞控制**。

RTP通常运行与UDP的上层，以利用UDP的`复用`和`求和校验`功能。RTP是两个主机之间提供基于连续的，稳定的数据流，而UDP则是在网络上提供一种非连续的(但是不稳定)数据报服务。RTP采用UDP作为目标传输协议的两个原因:

* 第一，RTP是针对多点传送设计的，基于链接的TCP不仅扩展性差，而且也不适合RTP。
* 第二，对于实时数据，时间延迟比可靠性更重要，而TCP次重发机制实现较高的可靠性，这点不是RTP所需要的。

例如。在网络拥堵情况，虽然有一些包可能对视导致服务质量下降，但服务质量依然在可接收的范围内。如果采用可靠的传输机制，重新传输的包可能会增加延迟，堵塞网络甚至饿死接收端。下午采用UDP/IP包封装RTP包。

<image src="image/19-5.png"/>

RTP本身`不提供保证延迟的机制`。要求下层提供支持以控制交换价和路由器的资源。RSVP可以用于预留这种资源并提供请求QoS.RTP也可以协同RTCP以获得关于数据质量的反馈信息以及会话参与者的相关信息。

#### 3.2.1 RTP会话

为了建立会话RTP会话，应用程序定义一对目的地址(一个网络地址加上两个只能对TP和RTCPD的端口)。在媒体会话中，每种媒体通常采用其各自的RTP会话进行传播，对应的RTCP包报告该会话的传输质量。例如，音频和视频通常采用独立的RTP会话，允许接收器时候接收某个媒体。

### 3.2.2时间戳

时间戳对于实时应用非常重用。为了正确的速率播放数据，接收端采用时间戳重建原始时间。时间戳也用于不同步不同的流。如音频和视频数据。然而，RTP本身并不负责同步问题，同步是在应用层时间的。

此外，UDP并不按照时间顺序传输数据包。因此，系列号用于将接受的数据包按正确的顺序组织并实现丢包保护。当一个视频帧被分割成几个RTP包时，一些视频格式允许所有的这些包具有想用的时间戳。因此，时间戳并不足以保证数据包可以被放回正确的顺序中。

### 3.3.3 载荷标识

载荷标识定义了内容的类型和压缩格式。使得接收端知道如何解释、标识这些内容。支持的载荷类型有几种：

* 各种音频格式 包括CELP、线性PCM、ADPCM、G.711、G.722，Dolby@Digital、Dolby@Digital Plus、MP3等
* MPEG-1音频和视频基本流、系统流
* MPEG-2音频和视频基本流、程序传输流
* MPEG-4音频和视频流
* MPEG-4 OD、BIFS、OCI和IPMP流
* JPEG和M-JPEG视频流
* DV(IEC 61834)、H.261和H.263流
* SMPTE 421M（VC-1）视频流
* MPEG-4.10(H.264)视频流
* ASF

档次和载荷格式定义可以太通过额外的载荷类型来实现。在任何传输时间，RTP发送器只能发送一种类型的载荷，尽管载荷类型在传输过程中(例如为了适应网络拥堵)可以发生变化.

### 3.3RTCP
### 3.4 RSVP
## 4ISMA
### 4.1档次0
### 4.2档次1

## 5 在IP上实现广播
## 6 条件接收(DRM)
对于宽带IP网络，条件接收通常称为DRM(Digital Right Management,数字版权保护)


