## 颜色空间

`颜色空间(color space)`是颜色集合的数学表示.三个最常用的颜色模型RGB(用于计算机图形学)；YIQ、YUV、或YCbCr(用于视频系统中)；CMYK（用于色彩打印）。但是，这些颜色空间都与`色度`、`饱和度`和`亮度`这些直概念**没有直接的关系**。这使得人们暂时去寻求其他的模型，如HSI和HSV，来简化变成、处理和终端用户操作。

### 1RGB颜色空间
RGB颜色空间广泛用于计算机图形学和显示器。红绿蓝是三种基本的加性颜色(**各个颜色成分相加来形成所需的颜色**)，可以用三位笛卡尔坐标系来表示颜色RGB颜色空间。

<image src="image/3-1.png"/>
立方体中对角线所代表颜色的每个基本颜色分量相等，对角线不同的点具有不同的灰度值。下表包含RGB值具有100%的幅度、100%饱和彩条(color bar)和公共的视频测试信号。

<image src="image/3-1-1.png"/>
RGB颜色空间是计算机图形学最通常的选择，因为彩色显示器采用红、绿和蓝三色来生成目标颜色。因此，选择RGB颜色空间简化了系统的架构与设计。RGB可以使用大量已有的模块。

但是，处理现实图像时，使用RGB颜色有些局限。RGB生成任何一种颜色都需要形同的带宽，使得每个RGB颜色分量的帧缓冲需要童颜的像素深度和显示分辨率。如改变亮度或颜色，必须重新计算亮度和颜色，如果能够直接修改处理会更快。所以许多视频采用亮度(luma)和两个色差信号。最常用采用YUV、YIQ和YCbCr颜色空间。

### 2.YUV颜色空间

YUV颜色空间是下面三大复合颜色视频标准采用的颜色空间:PAL(逐行倒相彩色电视制式)、NTSC(美国国家电视委员会制式)和SECAM（按序传送彩色与存储制式）。
* 黑白系统仅使用亮度(Y)信息；颜色信息（U和V）以一种特定的方式加入，使得黑白电视接收机同样可以显示标准的黑白图像。
* 彩色电视机额外的彩色信息进行解码从而显示彩色画面。

gamma校验的RGB(表示为R'G'B')与YUV颜色空间之间的转化公式为:
```
Y=0.299R'+0.587G'+0.114B'
U=-0.147R'-0.289G'+0.436B'
 =0.492(B'-Y)
V=0.615R'-0.515G'-0.100B'
 =0.877(B'-Y)

R'=Y+1.140V
G'=Y-0.395U-0.581V
B'=Y+2.032U
```
对于取值范围为0~255的数字R'G'B'值，Y的取值范围为0~255,U的取值范围`0~±122`，V的取值范围为`0~±157`.通常可以对这些公式转换进行裁剪以简化在实际的NTSC或PAL数字编码和解码器中实现。
**注意**对于数字数据，8位YUV和R'G'B'数据应该在0和255处饱和，以避免向下溢出和向上溢出导致的**反转问题**。

如果使用了(B'-Y')和(R'-Y')整个取值范围，那么复合NTSC和PAL的量化等级将超出黑白电视发送器和接收器所能承受的范围。**实验表明**：调制的次波在白色以上和黑色以下的偏移达到亮度信号(Y)偏移的20%是准许的。那么需要选择缩放因子是的最大的量化等级对应于75%的幅度，100%的饱和黄色和青色彩条，即这个颜色为最亮的白色(100IRE).

### 3.YCbCr颜色空间

随着数字分量视频标准的发展，YCbCr颜色空间作为ITU-RBT.601的一部发展起来了。YCbCr颜色空间是YUV颜色空间的缩放和偏移版本。

* Y定义为具有8位，标准颜色表示范围`16~235`
* Cb和Cr标称颜色表示范围定为16~240.

我们将几种YCbCr采样格式进行描述,如`4:4:4`,`4:2:2`,`4：1：1`和`4:2:0`.

### 3.1RGB与YCbCr颜色空间之间的转换公式:SDTV

#### 3.1.1 RGB与YCbCr颜色空间之间的转换:模拟公式。
许多规范的假定源信号为模拟R'G'B'，并具有0-1的归一化颜色范围。这样，首先要转换为模拟的YCbCr颜色空间

```
Y=0.299R'+0.587G'+0.144B'
Pb=-0.169R'-0.331G'+0.500B'
Pr=0.500R'-0.419G'-0.081B'
```
为了生成8位正确的YCbCr颜色，需要将模拟YCbCr颜色量化为8位的颜色值：
```
Y=round[219Y+16]
Cb=round[224Pb+128]
Cr=round[224Pr+128]
```



